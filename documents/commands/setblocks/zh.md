# `/setblocks`

此命令用于放置多个方块。

命令在执行时，会迭代区域内的各个方块坐标，并依次应用方块函数。对于一个坐标方块函数在计算后会立即放置，然后再进入下一个坐标，因此方块放置的过程中会影响后续的方块函数的计算。

命令执行前会预估受影响的方块数量。如果数量小于 16384，则立即放置所有的方块。如果超过 16384，则会分步骤地放置方块，从而避免一瞬间对服务器产生较大的影响，这意味着这个过程可能并不会在一游戏刻内执行完成。当预估的方块数量超过 16777215 时，命令会拒绝执行。

## 语法

`/setblocks <区域> <方块> [关键字参数：immediately | bypass_limit | skip_light_update | notify_listeners | notify_neighbors | force_state | post_process]`

## 参数

### `<区域>`

受到影响的区域。会在这个区域内放置方块。

### `<方块>`

需要应用的方块函数。

### 关键字参数

### `immediately`

布尔值，默认为 `false`。方块是否立即在完成执行，而不是分步骤地执行，即使预估的方块数量超过 16384 个。这意味着可能会对服务器产生短时间的卡顿。

### `by_pass_limit`

布尔值，默认为 `false`。如果设为 `true`，即使预估的方块数量超过 16777215，命令也会执行。

### `skip_light_update`

布尔值，默认为 `false`。如果设为 `true`，那么方块在放置时不会产生光照更新。此参数在 1.20 以上版本无效，因此 1.20 对光照进行了优化。

### `notify_listeners`

布尔值，默认为 `true`。方块放置后会告知客户端，如果设为 `false`，客户端不会同步相应的放声更新，从而导致客户端与服务器不一致，出现幽灵方块现象。

### `notify_neighbors`

布尔值，默认为 `true`。放置放置后更新毗邻的方块。

### `force_state`

布尔值，默认为 `false`。抑制相应的方块更新，强制放置方块。此参数不会影响放置流体导致了流体流动，但是能够抑制在移除流体后周围流体的流动。

### `post_process`

布尔值，默认为 `false`。此参数对于原版的 `/setblock` 命令而言则为 `true`。方块在放置前会进行额外的处理。

## 示例

- `/setblocks cuboid(~~~, ~5~5~5) stone`：在当前位置到 `~5 ~5 ~5` 的位置之间的长方体放置石头。
- `/setblocks sphere(5) white_stained_glass`：在半径 5 的球体范围内放置白色染色玻璃板。
- `/setblocks hcyl(80, 20) air`：将半径 80、高度 20 的圆柱体方块范围设为空气。
- `/setblocks hcyl(80, 20) air immediately=true`：立即将半径 80、高度 20 的圆柱体方块范围设为空气，不分步骤执行。
- `/setblocks cuboid(~~~, ~2~2~2) cactus force_state=true`：放置仙人掌，尽管在正常情况下这些仙人掌不可能成功放置。
- `/setblocks sphere(20) dry()`：去除半径 20 的球体范围内的方块中的水。