# `circle()` 曲线

沿指定的中心和半径向量的圆周或者圆周的一部分。这种曲线有以下几个基本的要素：

- 中心：圆的中心点。
- 半径：圆的半径，向量。在绘制圆时，会将此向量沿轴向量旋转，从而绘制一个圆。
- 轴：圆的旋转轴。旋转轴通常应该要与半径垂直，但在部分情况下也可以不垂直。
- 范围：圆的旋转范围。默认为一周，即旋转完整的一周，从而绘制出完整的圆。

使用此曲线绘制的圆可以是任何大小、任何角度。与之相比，区域 [`hcyl()`] 只能绘制出以 y 轴为轴的完整的圆。

## 语法

- `circle(<半径> [at <中心>] [轴] [ranging <范围>])`
- `circle(from <半径向量> [at <中心>] [轴] [ranging <范围>])`

除 `<半径>`/`from <半径向量>` 外，各部分均可调换，但仍不能重复出现。

## 参数

### `<半径>`/`<半径向量>`

圆的半径，必须。指定为向量时，必须要有 `from` 关键字，向量的格式为 `<x> <y> <z>` 或 `[长度] <方向>`（其中 `[长度]` 的默认值为 1）。

当半径指定为标量时，那么在计算时，半径向量的方向会与轴垂直，其具体的计算方法是计算轴向量与 y 轴正方向单位向量的向量积，并单位化后乘以半径的大小作为半径向量。若轴向量正好在 y 轴上，则半径向量的方向为 x 轴正方向或负方向，取决于轴向量的 y 轴值的正负。

### `<中心>`

坐标，可以是相对坐标或局部坐标。未指定时，则为背景执行源的坐标。

### `[轴]`

圆的旋转轴。可以用以下方式指定：

- `around <轴向量>`：直接指定轴向量，其中向量由用空格分隔的三个浮点数表示。
- `around [长度] <方向>`：表示轴向量为指定的方向。`[长度]` 的默认值为 1，通常无需指定，因为作为轴时其长度不起作用。
- `rotated <旋转角度>`：指定旋转角度。
- `facing <坐标>`：指定其轴向量为半径指向指定的坐标。

当旋转轴没有指定时，默认为 y 轴正方向。

### `<范围>`

在这个圆周上绘制的范围，其格式为：

- `<起始角度>..<结束角度>`，两个角度的大小不做要求，会进行正确的比较。
- `<结束角度>`：相当于 `0..<结束角度>`。

其中，角度的格式为：

- `0`：指定为零角度时可以不指代单位。
- `<浮点数>deg`：角度制的角度，一周为 360 度。
- `<浮点数>rad`：弧度制的角度，一周为 2π。
- `<浮点数>turn`：指定圆周数，一周为 1turn。

## 示例

- `circle(5)`：以当前坐标为中心、半径为 5、以 y 轴正方向为轴（即在水平面上）的完整圆。
- `circle(5 ranging 0.5turn)`：北半圆弧。
- `circle(5 ranging 0..0.5turn)`：与前一个例子等价。
- `circle(5 ranging 0..180deg)`：与前一个例子等价。
- `circle(5 ranging 0.25turn..0.75turn)`：西半圆弧。
- `circle(5 around east)`：以 x 轴正方向为轴的完整圆周，即圆在 y、z 平面上。
- `circle(5 around 0 1 2)`：绕 (0, 1, 2) 向量旋转的圆，该圆所在的平面与该向量垂直。
- `circle(5 rotated 45 20)`：朝向 (45, 20) 方向的圆。
- `circle(5 facing ^ ^ ^1)`：朝向玩家视角前方方向的圆，该圆所在的平面与玩家视角的方向垂直。
- `circle(5 at ^ ^ ^ 5 facing ~ ~ ~)`：玩家视角前方方向 5 格位置并朝向玩家方向的圆，该圆所在的平面与玩家视角的方向垂直。
- `circle(5 at ~ ~5 ~)`：以玩家上方 5 格的位置为中心、以 y 轴正方向为畘（即在水平面上）的圆。