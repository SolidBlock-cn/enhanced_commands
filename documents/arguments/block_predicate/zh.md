# 方块谓词

**方块谓词（block predicate）**是指用于判断世界内的一个特定方块的条件。这种[参数类型](../zh.md)可用于对特定的方块进行筛选。

## 基本用法

方块谓词可以像原版一样，使用方块 ID 和标签来匹配方块，同时还可以指定方块状态属性和 NBT 数据。例如：

- `minecraft:stone`：当方块是石头时通过
- `#minecraft:wool`：当方块是任意一种颜色的羊毛时通过
- `minecraft:redstone_lamp[lit=true]`：当方块是亮着的红石灯时通过
- `#stairs[waterlogged=false]`：当方块是含水的任意一种楼梯时通过

## 复合方块谓词

多个方块谓词可以进行复合，从而产生更加复杂的方块谓词。

- `<方块谓词 1>&<方块谓词 2>`：两个（或者多个）方块谓词的交集，当这些方块谓词都通过时，这个方块谓词才会通过
- `<方块谓词 1>|<方块谓词 2>`：两个（或者多个）方块谓词的并集，只要这些方块谓词有一个通过，这个方块谓词就通过
- `!<方块谓词>`：方块谓词的否定，当方块谓词不通过时，这个方块谓词才通过

上面的这三种语法的先后顺序为：否定、交集、并集。例如：`a|!b&c` 相当于 `a|((!b)&c)`。

上面的这些语法不能有空格，但是如果位于括号内，则可以有空格。例如 `a | b` 是无效的，但是 `(a | b)` 和 `rel(3 up, a | b)` 是有效的。

例如（下面的这些例子中的 ID 均省略了命名空间）：

- `stone|dirt|grass_block`：当方块是石头、泥土或者草方块时通过
- `water|*[waterlogged=true]`：当方块是水或者任意含水方块时通过
- `#stairs&#dragon_immune`：当方块是楼梯且能够对末影龙免疫时通过
- `#stairs&!#dragon_immune`：当方块是楼梯且不能够对末影龙免疫时通过
- `#stairs&(#dragon_immune|#wither_immune)`：当方块是楼梯，且能够对末影龙或凋灵免疫时通过

## 完整列表

### 非函数语法

- [简单方块谓词](simple/zh.md)：简单地匹配方块的 ID 和标签。
- [标签方块谓词](tag/zh.md)：检测方块是否拥有特定的标签。
- [属性方块谓词](properties/zh.md)：检测方块是否拥有特定的属性。
- [NBT 方块谓词](nbt/zh.md)：检测方块的 NBT 数据。
- [属性 NBT 组合](property_nbt_combination/zh.md)：同时检测方块的 ID 或标签、方块状态属性以及 NBT，这相当于原版的用法。
- 恒定方块谓词：匹配所有方块，始终通过，语法为 `*`。
- [竖直偏移方块谓词](horizontal_offset/zh.md)：检测方块的竖直偏移的位置的方块是否符合谓词。

此外，函数语法中的 `all()` 和 `any()` 也可以通过非函数语法表示，参见前面的[#复合方块谓词](#复合方块谓词)段落。

### 函数语法

- [双谓词检测](bi_predicate/zh.md)：语法为：
    - `same(<方块谓词 1>, <方块谓词 2>)`，只有当两个方块谓词都通过或都不通过时，这个方块谓词才通过。
    - `diff(<方块谓词 1>, <方块谓词 2>)`，只有当两个方块谓词有一个通过、另一个不通过时，这个方块谓词才通过。
- [`all([方块谓词], ...)`](intersect/zh.md)：只有当多个方块谓词通过时，这个方块谓词才会通过。
- [`any([方块谓词], ...)`](union/zh.md)：多个方块谓词只要有一个通过，这个方块谓词就会通过。
- [`expose(<暴露类型>, <方向> ...)`](expose/zh.md)：检测方块是否在指定的方向上以指定的方式暴露。
- [`idcontain(<正则表达式>)`](idcontain/zh.md)：检测方块的 ID 是否含有特定的正则表达式。
- [`rand(<概率>, [方块谓词])`](rand/zh.md)：只有在指定的概率下通过。
- [`region(<区域>)`](region/zh.md)：只有当方块在指定的区域内时通过。
- [`rel(<相对位置>, <方块谓词>)`](rel/zh.md)：检测方块的特定相对位置的方块。